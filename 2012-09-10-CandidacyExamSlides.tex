\documentclass[hyperref={bookmarks=false}]{beamer}
\useoutertheme{infolines}
\setbeamertemplate{headline}{} % removes the headline that infolines inserts
% \setbeamertemplate{footline}{
%   \hfill%
%   \usebeamercolor[fg]{page number in head/foot}%
%   \usebeamerfont{page number in head/foot}%
%   \insertpagenumber\,/\,\insertpresentationendpage\kern1em\vskip2pt%
% }
\setbeamertemplate{footline}{
  \hfill%
  \usebeamercolor[fg]{page number in head/foot}%
  \usebeamerfont{page number in head/foot}%
  \insertpagenumber\kern1em\vskip2pt%
}
\setbeamertemplate{navigation symbols}{}
\setbeamercolor{alerted text}{fg=blue}
\setbeamerfont{alerted text}{series=\bfseries,family=\ttfamily}
\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Outline}
    \tableofcontents[currentsection]
  \end{frame}
}
\usepackage[parfill]{parskip}
\usepackage{color}
\usepackage[linewidth=0.5pt]{mdframed}
\newmdenv[innerleftmargin=1mm, innerrightmargin=1mm, innertopmargin=-1mm, innerbottommargin=2mm, leftmargin=-1mm, rightmargin=-1mm]{lstlistinglike}
\usepackage{tikz}
\usepackage{graphicx}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}

\hypersetup{pdfauthor={Eugene Burmako},pdfsubject={Metaprogramming with Macros},pdftitle={Metaprogramming with Macros}}
\title{Scala Macros}

\begin{document}

\title{Metaprogramming with Macros}
\author{Eugene Burmako}
\institute{\'Ecole Polytechnique F\'ed\'erale de Lausanne \\
           \texttt{http://scalamacros.org/}}
\date{10 September 2012}
{
\setbeamertemplate{footline}{}
\begin{frame}
  \titlepage
\end{frame}
}

\begin{frame}[fragile]
\frametitle{Macros}
\pause
Macros realize the notion of textual abstraction.

\pause
Textual abstraction:
\begin{itemize}
\item Recognize pieces of text that match a specification
\item Replace them according to a procedure
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Example}
\begin{semiverbatim}
(let (x 42) (print x))








((lambda (x) (print x)) 42)
\end{semiverbatim}
\end{frame}

\begin{frame}[fragile]
\frametitle{Example}
\begin{semiverbatim}
(let (\text{\color{red}{x}} \text{\color{teal}{42}}) \text{\color{violet}{(print x)}})

(defmacro let args
  (cons
   (cons \text{\color{blue}{'lambda}}
         (cons (list \text{\color{red}{(caar args)}})
               \text{\color{violet}{(cdr args)}}))
   \text{\color{teal}{(cdar args)}}))

((\text{\color{blue}{lambda}} (\text{\color{red}{x}}) \text{\color{violet}{(print x)}}) \text{\color{teal}{42}})
\end{semiverbatim}
\end{frame}

\begin{frame}[fragile]
\frametitle{Why macros?}
\begin{itemize}
\item Deeply embedded DSLs (database access, testing)
\item Optimization (programmable inlining, fusion)
\item Analysis (integrated proof-checker)
\item Effects (effect containment and propagation)
\item ...
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Today's talk}

Macrology is vast:
\begin{itemize}
\item Notation
\item Variable capture
\item Typechecking meta-programs
\item Syntax extensibility
\item ...
\end{itemize}

\pause
Surveyed papers are versatile as well.
\end{frame}

\begin{frame}[fragile]
\frametitle{Today's talk}

Going into all the details is a genuine pleasure
% and I would invite you to share this pleasure with me during the second part of the oral exam.

But instead let me tell you a story
\end{frame}

\begin{frame}[fragile]
\frametitle{Alexandre Dumas}

\begin{center}
\includegraphics[width=5.5cm]{dumas}
\end{center}
\end{frame}

\section{The story of bindings}

\begin{frame}[fragile]
\frametitle{Anaphoric \texttt{if}}
\begin{semiverbatim}
(aif (calculate)
  (print it)
  (error "does not compute"))
\end{semiverbatim}
\end{frame}

\begin{frame}[fragile]
\frametitle{The \texttt{aif} macro}
\begin{semiverbatim}
(aif (calculate)
  (print it)
  (error "does not compute"))

\visible<2->{(defmacro aif args}
  \visible<4->{\only<1-3>{      }\only<4>{\alert{(list }}\only<5->{\alert{     `}}}\only<5>{\alert{(}}\only<4>{\alert{'}}\only<3>{(}\visible<3->{let }\visible<4>{\alert{(list (list }}\only<4>{\alert{'}}\only<3,5->{(}\visible<3->{it (car args)}\only<3,5->{)}\visible<4>{)\alert{)}}
    \visible<4>{\alert{(list }}\only<4>{\alert{'}}\only<3>{(}\visible<3->{if }\only<4>{\alert{'}}\only<3>{ }\visible<3->{it}
            \visible<3->{(cadr args)}
            \visible<3->{(caddr args)}\visible<3->{))}\only<4,5->{\alert{)}}

(let (it (calculate))
  (if it
    (print it)
    (error "does not compute")))
\end{semiverbatim}
\end{frame}

\end{document}